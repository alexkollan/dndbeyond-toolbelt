var DNDBeyondToolbelt;(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var i={},r=[],l=0;l<e.length;l++){var s=e[l],c=a.base?s[0]+a.base:s[0],d=i[c]||0,u="".concat(c," ").concat(d);i[c]=d+1;var p=n(u),m={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var f=o(m,a);a.byIndex=l,t.splice(l,0,{identifier:u,updater:f,references:1})}r.push(u)}return r}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=a(e=e||[],o=o||{});return function(e){e=e||[];for(var r=0;r<i.length;r++){var l=n(i[r]);t[l].references--}for(var s=a(e,o),c=0;c<i.length;c++){var d=n(i[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=s}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,a,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(a)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(r[s]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);a&&r[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},365:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(601),o=n.n(a),i=n(314),r=n.n(i)()(o());r.push([e.id,"/* D&D Beyond Toolbelt Styles */\n\n/* Toolbelt Button Integration */\n.ct-character-header-desktop__group--toolbelt {\n  margin-right: 12px;\n}\n\n.toolbelt-button {\n  display: flex;\n  align-items: center;\n  transition: all 0.2s ease;\n  cursor: pointer;\n}\n\n.toolbelt-button:hover {\n  opacity: 0.8;\n}\n\n.toolbelt-button:active {\n  transform: translateY(1px);\n}\n\n/* Fix SVG alignment and sizing */\n.toolbelt-button .ct-character-header-desktop__button-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  margin-right: 8px;\n}\n\n.toolbelt-button .ct-character-header-desktop__button-icon svg {\n  width: 16px;\n  height: 16px;\n  display: block;\n}\n\n/* Ensure the button matches D&D Beyond's styling exactly */\n.toolbelt-button .ct-character-header-desktop__button-label {\n  color: inherit;\n  font-size: inherit;\n  font-weight: inherit;\n  font-family: inherit;\n  line-height: 1;\n}\n\n/* Control Panel Styles */\n.toolbelt-control-panel {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.control-panel-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(2px);\n}\n\n.control-panel-content {\n  position: relative;\n  background: #1e1e1e;\n  border: 2px solid #53a5c5;\n  border-radius: 12px;\n  min-width: 400px;\n  max-width: 500px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n  color: #ffffff;\n  font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n}\n\n.control-panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  border-bottom: 1px solid #333;\n}\n\n.control-panel-header h3 {\n  margin: 0;\n  color: #53a5c5;\n  font-size: 1.25rem;\n  font-weight: 600;\n}\n\n.control-panel-close {\n  background: none;\n  border: none;\n  color: #ffffff;\n  font-size: 24px;\n  cursor: pointer;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n  transition: background-color 0.2s ease;\n}\n\n.control-panel-close:hover {\n  background-color: #333;\n}\n\n.control-panel-body {\n  padding: 20px 24px;\n}\n\n.control-panel-description {\n  margin: 0 0 20px 0;\n  color: #cccccc;\n  font-size: 0.9rem;\n  line-height: 1.4;\n}\n\n.features-list {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.feature-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: #2a2a2a;\n  border-radius: 8px;\n  border: 1px solid #333;\n  transition: border-color 0.2s ease;\n}\n\n.feature-item:hover {\n  border-color: #53a5c5;\n}\n\n.feature-toggle {\n  display: flex;\n  align-items: flex-start;\n  cursor: pointer;\n  flex: 1;\n}\n\n.feature-toggle input[type=\"checkbox\"] {\n  display: none;\n}\n\n.toggle-slider {\n  position: relative;\n  width: 44px;\n  height: 24px;\n  background: #444;\n  border-radius: 12px;\n  margin-right: 12px;\n  margin-top: 2px;\n  flex-shrink: 0;\n  transition: background-color 0.3s ease;\n}\n\n.toggle-slider::before {\n  content: '';\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background: #ffffff;\n  border-radius: 50%;\n  top: 2px;\n  left: 2px;\n  transition: transform 0.3s ease;\n}\n\n.feature-toggle input[type=\"checkbox\"]:checked + .toggle-slider {\n  background: #53a5c5;\n}\n\n.feature-toggle input[type=\"checkbox\"]:checked + .toggle-slider::before {\n  transform: translateX(20px);\n}\n\n.feature-info {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n\n.feature-label {\n  color: #ffffff;\n  font-size: 0.95rem;\n  font-weight: 500;\n  margin-bottom: 2px;\n}\n\n.feature-description {\n  color: #cccccc;\n  font-size: 0.8rem;\n  line-height: 1.3;\n}\n\n.feature-status {\n  margin-left: 12px;\n}\n\n.status-indicator {\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.status-indicator.enabled {\n  background: rgba(76, 175, 80, 0.2);\n  color: #4caf50;\n  border: 1px solid #4caf50;\n}\n\n.status-indicator.disabled {\n  background: rgba(244, 67, 54, 0.2);\n  color: #f44336;\n  border: 1px solid #f44336;\n}\n\n.control-panel-footer {\n  padding: 16px 24px;\n  border-top: 1px solid #333;\n  text-align: center;\n}\n\n.control-panel-footer small {\n  color: #888;\n  font-size: 0.8rem;\n}\n\n/* Responsive Design */\n@media (max-width: 480px) {\n  .control-panel-content {\n    min-width: 320px;\n    margin: 20px;\n  }\n  \n  .control-panel-header,\n  .control-panel-body,\n  .control-panel-footer {\n    padding-left: 16px;\n    padding-right: 16px;\n  }\n}\n",""]);const l=r},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,o&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={id:a,exports:{}};return e[a](i,i.exports,n),i.exports}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,i(a.key),a)}}function i(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;const r=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onClick=t,this.element=null},t=[{key:"render",value:function(){var e=this;return this.element||(this.element=document.createElement("div"),this.element.className="ct-character-header-desktop__button toolbelt-button",this.element.setAttribute("role","button"),this.element.setAttribute("tabindex","0"),this.element.innerHTML='\n      <div class="ct-character-header-desktop__button-icon">\n        <svg \n          xmlns="http://www.w3.org/2000/svg" \n          viewBox="0 0 50 50" \n          class="ddbc-svg ddbc-toolbelt-svg ddbc-svg--themed"\n        >\n          <path \n            fill="#53a5c5" \n            d="M25 5c-11 0-20 9-20 20s9 20 20 20 20-9 20-20S36 5 25 5zm0 36c-8.8 0-16-7.2-16-16S16.2 9 25 9s16 7.2 16 16-7.2 16-16 16z"\n          />\n          <path \n            fill="#53a5c5" \n            d="M32 18h-5v-5c0-1.1-.9-2-2-2s-2 .9-2 2v5h-5c-1.1 0-2 .9-2 2s.9 2 2 2h5v5c0 1.1.9 2 2 2s2-.9 2-2v-5h5c1.1 0 2-.9 2-2s-.9-2-2-2z"\n          />\n        </svg>\n      </div>\n      <span class="ct-character-header-desktop__button-label">Toolbelt</span>\n    ',this.element.addEventListener("click",this.onClick),this.element.addEventListener("keydown",function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.onClick())})),this.element}}],t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,d(a.key),a)}}function d(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}const u=function(){return e=function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.features=t,this.onToggleFeature=n,this.onClose=a,this.element=null},t=[{key:"render",value:function(){return this.element||(this.element=document.createElement("div"),this.element.className="toolbelt-control-panel",this.element.innerHTML='\n      <div class="control-panel-overlay"></div>\n      <div class="control-panel-content">\n        <div class="control-panel-header">\n          <h3>D&D Beyond Toolbelt</h3>\n          <button class="control-panel-close">Ã—</button>\n        </div>\n        <div class="control-panel-body">\n          <p class="control-panel-description">\n            Toggle features to enhance your D&D Beyond experience\n          </p>\n          <div class="features-list">\n            '.concat(this.renderFeatures(),'\n          </div>\n        </div>\n        <div class="control-panel-footer">\n          <small>Version 1.0.0 - D&D Beyond Toolbelt</small>\n        </div>\n      </div>\n    '),this.attachEventListeners()),this.element}},{key:"renderFeatures",value:function(){return Object.entries(this.features).map(function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,i,r,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],a=t[1];return'\n      <div class="feature-item">\n        <label class="feature-toggle">\n          <input\n            type="checkbox"\n            data-feature="'.concat(n,'"\n            ').concat(a.enabled?"checked":"",'\n          />\n          <span class="toggle-slider"></span>\n          <span class="feature-info">\n            <span class="feature-label">').concat(a.label,'</span>\n            <span class="feature-description">').concat(a.description,'</span>\n          </span>\n        </label>\n        <div class="feature-status">\n          <span class="status-indicator ').concat(a.enabled?"enabled":"disabled",'">\n            ').concat(a.enabled?"ON":"OFF","\n          </span>\n        </div>\n      </div>\n    ")}).join("")}},{key:"attachEventListeners",value:function(){var e=this;this.element.querySelector(".control-panel-close").addEventListener("click",this.onClose),this.element.querySelector(".control-panel-overlay").addEventListener("click",this.onClose),this.element.querySelectorAll('input[type="checkbox"]').forEach(function(t){t.addEventListener("change",function(t){var n=t.target.dataset.feature;e.onToggleFeature(n)})});var t=function(n){"Escape"===n.key&&(e.onClose(),document.removeEventListener("keydown",t))};document.addEventListener("keydown",t)}},{key:"updateFeatures",value:function(e){var t=this;this.features=e,this.element.querySelector(".features-list").innerHTML=this.renderFeatures(),this.element.querySelectorAll('input[type="checkbox"]').forEach(function(e){e.addEventListener("change",function(e){var n=e.target.dataset.feature;t.onToggleFeature(n)})})}}],t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,f(a.key),a)}}function f(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}const h=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="Spell Enhancements",this.description="Hide upcasted spells and show only base level versions",this.initialized=!1,this.hideUpcastedSpells=!1,this.hiddenSpells=new Set},(t=[{key:"init",value:function(){this.initialized||(console.log("ðŸ”® Spell Enhancements feature initialized"),this.initialized=!0)}},{key:"addToggleButton",value:function(){var e=this,t=document.querySelector(".ct-spells-filter");if(t){var n=document.createElement("button");n.className="ct-theme-button ct-theme-button--outline ct-theme-button--interactive ct-button character-button ddbc-button character-button-medium spell-enhancement-toggle",n.innerHTML='\n      <span class="ct-button__content">\n        <span class="spell-enhancement-icon">ðŸ”®</span>\n        Hide Upcasted Spells\n      </span>\n    ',n.style.marginLeft="10px",n.style.opacity=this.hideUpcastedSpells?"1":"0.7",n.addEventListener("click",function(){e.toggleUpcastedSpells()});var a=t.querySelector(".ct-spells-filter__callout button");a&&a.parentNode&&a.parentNode.appendChild(n)}}},{key:"toggleUpcastedSpells",value:function(){this.hideUpcastedSpells=!this.hideUpcastedSpells;var e=document.querySelector(".spell-enhancement-toggle");if(e){e.style.opacity=this.hideUpcastedSpells?"1":"0.7";var t=e.querySelector(".ct-button__content");t&&(t.innerHTML='\n          <span class="spell-enhancement-icon">ðŸ”®</span>\n          '.concat(this.hideUpcastedSpells?"Show All Spells":"Hide Upcasted Spells","\n        "))}this.hideUpcastedSpells?this.hideUpcastedSpellsFromDOM():this.showAllSpells(),console.log("ðŸ”® Upcasted spells ".concat(this.hideUpcastedSpells?"hidden":"shown"))}},{key:"hideUpcastedSpellsFromDOM",value:function(){var e=this;this.showAllSpells(),this.hiddenSpells.clear(),document.querySelectorAll(".ct-spells-spell").forEach(function(t){t.querySelector(".ct-spells-spell__scaled")&&(t.style.display="none",e.hiddenSpells.add(t),e.checkAndHideEmptySpellLevel(t))}),console.log("ðŸ”® Hidden ".concat(this.hiddenSpells.size," upcasted spells"))}},{key:"checkAndHideEmptySpellLevel",value:function(e){var t=e.closest(".ct-spells-level__spells-content");if(t){var n=t.querySelectorAll(".ct-spells-spell");if(0===Array.from(n).filter(function(e){return"none"!==e.style.display}).length){var a=t.closest(".ct-content-group");a&&(a.style.display="none",this.hiddenSpells.add(a))}}}},{key:"showAllSpells",value:function(){this.hiddenSpells.forEach(function(e){e.style.display=""}),this.hiddenSpells.clear()}},{key:"onTabChange",value:function(e,t){"Spells"===e&&t&&(console.log("ðŸ”® Spell Enhancements: Spells tab is now active!"),this.handleSpellsTab())}},{key:"handleSpellsTab",value:function(){var e=this;setTimeout(function(){document.querySelector(".spell-enhancement-toggle")||e.addToggleButton(),e.hideUpcastedSpells&&e.hideUpcastedSpellsFromDOM()},500)}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),b={cantrip:[],"1st":[{name:"Find Familiar",url:"https://www.dndbeyond.com/spells/find-familiar",casting_time:"1 hour",range:"10 feet",attack:"--",damage:"Utility",components:{verbal:!0,somatic:!0,material:!0,duration:"Instantaneous"},source:"Player's Handbook"}],"2nd":[{name:"Web",url:"https://www.dndbeyond.com/spells/web",casting_time:"1 action",range:"60 feet",attack:"dex save",damage:"Control",components:{verbal:!0,somatic:!0,material:!0,duration:"Concentration, up to 1 hour"},source:"Player's Handbook"}],"3rd":[{name:"Counterspell",url:"https://www.dndbeyond.com/spells/counterspell",casting_time:"1 reaction",range:"60 feet",attack:"--",damage:"Control",components:{verbal:!1,somatic:!0,material:!1,duration:"Instantaneous"},source:"Player's Handbook"},{name:"Leomund's Tiny Hut",url:"https://www.dndbeyond.com/spells/leomunds-tiny-hut",casting_time:"1 minute",range:"10 feet",attack:"--",damage:"Utility",components:{verbal:!0,somatic:!0,material:!0,duration:"8 hours"},source:"Player's Handbook"}],"4th":[{name:"Banishment",url:"https://www.dndbeyond.com/spells/banishment",casting_time:"1 action",range:"60 feet",attack:"cha save",damage:"Banishment",components:{verbal:!0,somatic:!0,material:!0,duration:"Concentration, up to 1 minute"},source:"Player's Handbook"},{name:"Dimension Door",url:"https://www.dndbeyond.com/spells/dimension-door",casting_time:"1 action",range:"500 feet",attack:"--",damage:"Teleportation",components:{verbal:!0,somatic:!1,material:!1,duration:"Instantaneous"},source:"Player's Handbook"}],"5th":[{name:"Wall of Force",url:"https://www.dndbeyond.com/spells/wall-of-force",casting_time:"1 action",range:"120 feet",attack:"--",damage:"Control",components:{verbal:!0,somatic:!0,material:!0,duration:"Concentration, up to 10 minutes"},source:"Player's Handbook"},{name:"Mass Cure Wounds",url:"https://www.dndbeyond.com/spells/mass-cure-wounds",casting_time:"1 action",range:"60 feet",attack:"--",damage:"Healing",components:{verbal:!0,somatic:!0,material:!1,duration:"Instantaneous"},source:"Player's Handbook"},{name:"Animate Objects",url:"https://www.dndbeyond.com/spells/animate-objects",casting_time:"1 action",range:"120 feet",attack:"--",damage:"Control",components:{verbal:!0,somatic:!0,material:!1,duration:"Concentration, up to 1 minute"},source:"Player's Handbook"},{name:"Bigby's Hand",url:"https://www.dndbeyond.com/spells/bigbys-hand",casting_time:"1 action",range:"120 feet",attack:"--",damage:"Control",components:{verbal:!0,somatic:!0,material:!0,duration:"Concentration, up to 1 minute"},source:"Player's Handbook"}],"6th":[{name:"Heal",url:"https://www.dndbeyond.com/spells/heal",casting_time:"1 action",range:"Touch",attack:"--",damage:"Healing",components:{verbal:!0,somatic:!0,material:!1,duration:"Instantaneous"},source:"Player's Handbook"},{name:"Disintegrate",url:"https://www.dndbeyond.com/spells/disintegrate",casting_time:"1 action",range:"60 feet",attack:"dex save",damage:"10d6+40 force",components:{verbal:!0,somatic:!0,material:!0,duration:"Instantaneous"},source:"Player's Handbook"},{name:"Otto's Irresistible Dance",url:"https://www.dndbeyond.com/spells/ottos-irresistible-dance",casting_time:"1 action",range:"30 feet",attack:"wis save",damage:"Control",components:{verbal:!0,somatic:!1,material:!1,duration:"Concentration, up to 1 minute"},source:"Player's Handbook"}],"7th":[{name:"Plane Shift",url:"https://www.dndbeyond.com/spells/plane-shift",casting_time:"1 action",range:"Touch",attack:"cha save",damage:"Banishment",components:{verbal:!0,somatic:!0,material:!0,duration:"Instantaneous"},source:"Player's Handbook"},{name:"Mordenkainen's Magnificent Mansion",url:"https://www.dndbeyond.com/spells/mordenkainens-magnificent-mansion",casting_time:"1 minute",range:"300 feet",attack:"--",damage:"Utility",components:{verbal:!0,somatic:!0,material:!0,duration:"24 hours"},source:"Player's Handbook"},{name:"Simulacrum",url:"https://www.dndbeyond.com/spells/simulacrum",casting_time:"12 hours",range:"Touch",attack:"--",damage:"Creation",components:{verbal:!0,somatic:!0,material:!0,duration:"Until dispelled"},source:"Player's Handbook"},{name:"Forcecage",url:"https://www.dndbeyond.com/spells/forcecage",casting_time:"1 action",range:"100 feet",attack:"cha save",damage:"Control",components:{verbal:!0,somatic:!0,material:!0,duration:"1 hour"},source:"Player's Handbook"},{name:"Mirage Arcane",url:"https://www.dndbeyond.com/spells/mirage-arcane",casting_time:"10 minutes",range:"Sight",attack:"--",damage:"Illusion",components:{verbal:!0,somatic:!0,material:!1,duration:"10 days"},source:"Player's Handbook"}],"8th":[{name:"Clone",url:"https://www.dndbeyond.com/spells/clone",casting_time:"1 hour",range:"Touch",attack:"--",damage:"Creation",components:{verbal:!0,somatic:!0,material:!0,duration:"Instantaneous"},source:"Player's Handbook"},{name:"Maze",url:"https://www.dndbeyond.com/spells/maze",casting_time:"1 action",range:"60 feet",attack:"--",damage:"Banishment",components:{verbal:!0,somatic:!0,material:!1,duration:"Concentration, up to 10 minutes"},source:"Player's Handbook"},{name:"Control Weather",url:"https://www.dndbeyond.com/spells/control-weather",casting_time:"10 minutes",range:"Self (5-mile radius)",attack:"--",damage:"Control",components:{verbal:!0,somatic:!0,material:!0,duration:"Concentration, up to 8 hours"},source:"Player's Handbook"},{name:"Glibness",url:"https://www.dndbeyond.com/spells/glibness",casting_time:"1 action",range:"Self",attack:"--",damage:"Enhancement",components:{verbal:!0,somatic:!1,material:!1,duration:"1 hour"},source:"Player's Handbook"},{name:"Feeblemind",url:"https://www.dndbeyond.com/spells/feeblemind",casting_time:"1 action",range:"150 feet",attack:"int save",damage:"Debuff",components:{verbal:!0,somatic:!0,material:!0,duration:"Instantaneous"},source:"Player's Handbook"},{name:"Mind Blank",url:"https://www.dndbeyond.com/spells/mind-blank",casting_time:"1 action",range:"Touch",attack:"--",damage:"Protection",components:{verbal:!0,somatic:!0,material:!1,duration:"24 hours"},source:"Player's Handbook"}],"9th":[]};function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,i,r,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw o}}return l}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,w(a.key),a)}}function w(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}const x=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="Add Extra Spells",this.description="Adds custom spells to the spells tab with dark purple cast buttons",this.initialized=!1,this.extraSpells=b,this.addedSpells=new Set},t=[{key:"init",value:function(){var e=this;this.initialized||(this.loadExtraSpells(),window.dndbToolbelt=window.dndbToolbelt||{},window.dndbToolbelt.addExtraSpells=function(){e.handleSpellsTab()},this.initialized=!0)}},{key:"disable",value:function(){this.removeExtraSpells(),this.addedSpells.clear()}},{key:"loadExtraSpells",value:function(){}},{key:"onTabChange",value:function(e,t){"Spells"===e&&t&&this.handleSpellsTab()}},{key:"handleSpellsTab",value:function(){var e=this;setTimeout(function(){e.addCustomStyles(),e.addExtraSpellsToDOM()},500)}},{key:"addExtraSpellsToDOM",value:function(){var e=this;this.extraSpells&&0!==Object.keys(this.extraSpells).length&&(this.addedSpells.clear(),Object.entries(this.extraSpells).forEach(function(t){var n=y(t,2),a=n[0],o=n[1];e.addSpellsToLevel(a,o)}))}},{key:"addSpellsToLevel",value:function(e,t){var n=this,a=this.findSpellLevelContainer(e);if(a){var o=a.querySelector(".ct-spells-level__spells-content");o&&t.forEach(function(t){var a="".concat(e,"-").concat(t.name.replace(/\s+/g,"-").toLowerCase());if(o.querySelector('[data-spell-id="'.concat(a,'"]')))n.addedSpells.add(a);else{var i=n.createSpellElement(t,a);o.appendChild(i),n.addedSpells.add(a)}})}}},{key:"findSpellLevelContainer",value:function(e){var t={cantrip:"Cantrip","1st":"1st Level","2nd":"2nd Level","3rd":"3rd Level","4th":"4th Level","5th":"5th Level","6th":"6th Level","7th":"7th Level","8th":"8th Level","9th":"9th Level"}[e];if(!t)return null;var n,a=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=g(e))){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,r=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){r=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(r)throw o}}}}(document.querySelectorAll(".ct-content-group__header-content"));try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.textContent.trim()===t){var i=o.closest(".ct-content-group");if(i)return i}}}catch(e){a.e(e)}finally{a.f()}return null}},{key:"createSpellElement",value:function(e,t){var n=document.createElement("div");return n.className="ct-spells-spell",n.setAttribute("data-spell-id",t),n.innerHTML='\n      <div class="ct-spells-spell__action">\n        <button class="ct-theme-button ct-theme-button--filled ct-theme-button--interactive ct-button character-button ddbc-button character-button-block-small dndb-toolbelt-extra-spell" role="button">\n          <span class="ct-button__content">Cast</span>\n        </button>\n      </div>\n      <div class="ct-spells-spell__name">\n        <div class="ct-spells-spell__label">\n          '.concat(e.url?'<a href="'.concat(e.url,'" target="_blank" rel="noopener noreferrer" class="styles_spellName__wX3ll" style="text-decoration: none; color: inherit;">').concat(e.name,"</a>"):'<span class="styles_spellName__wX3ll">'.concat(e.name,"</span>"),'\n        </div>\n        <div class="ct-spells-spell__meta ct-spells-spell__meta--dark-mode">\n          <span class="ct-spells-spell__meta-item">Custom</span>\n          <span class="ct-spells-spell__meta-item">').concat(e.source||"Homebrew",'</span>\n        </div>\n      </div>\n      <div class="ct-spells-spell__activation ct-spells-spell__activation--dark-mode">\n        <span class="ddbc-tooltip ddbc-tooltip--dark-mode" data-tippy="" data-original-title="').concat(e.casting_time,'">').concat(this.formatCastingTime(e.casting_time),'</span>\n      </div>\n      <div class="ct-spells-spell__range ct-spells-spell--dark-mode">\n        <span class="ct-spells-spell__range-value">').concat(this.formatRange(e.range),'</span>\n      </div>\n      <div class="ct-spells-spell__attacking">\n        ').concat(this.formatAttack(e.attack),'\n      </div>\n      <div class="ct-spells-spell__damage">\n        ').concat(this.formatDamage(e.damage),'\n      </div>\n      <div class="ct-spells-spell__notes">\n        ').concat(this.formatComponents(e.components),"\n      </div>\n    "),n}},{key:"formatCastingTime",value:function(e){return{"1 action":"1A","1 bonus action":"1BA","1 reaction":"1R","1 minute":"1m","10 minutes":"10m","1 hour":"1h","8 hours":"8h","24 hours":"24h"}[e]||e}},{key:"formatRange",value:function(e){if("Self"===e||"Touch"===e)return'<span class="ct-spells-spell__range-origin">'.concat(e,"</span>");var t=e.match(/(\d+)\s*(feet|ft)/i);return t?'<span class="styles_numberDisplay__Rg1za"><span>'.concat(t[1],'</span><span class="styles_label__L8mZK styles_labelSignColor__Klmbs">ft.</span></span>'):'<span class="ct-spells-spell__range-value">'.concat(e,"</span>")}},{key:"formatAttack",value:function(e){if(!e||"--"===e)return'<div class="ct-spells-spell__empty-value">--</div>';if(e.includes("save")){var t=e.match(/(\w+)\s+(\d+)/i);if(t){var n=y(t,3),a=n[1],o=n[2];return'\n          <div class="ct-spells-spell__save">\n            <span class="ct-spells-spell__save-label ct-spells-spell--dark-mode">'.concat(a.toLowerCase(),'</span>\n            <span class="ct-spells-spell__save-value ct-spells-spell--dark-mode">').concat(o,"</span>\n          </div>\n        ")}}if(e.includes("+")){var i=e.replace("+","");return'\n        <div class="ct-spells-spell__tohit">\n          <button aria-haspopup="menu" class="integrated-dice__container">\n            <span class="styles_numberDisplay__Rg1za styles_signed__scf97">\n              <span class="styles_sign__NdR6X styles_labelSignColor__Klmbs" aria-label="plus">+</span>\n              <span>'.concat(i,"</span>\n            </span>\n          </button>\n        </div>\n      ")}return'<div class="ct-spells-spell__empty-value">--</div>'}},{key:"formatDamage",value:function(e){if(!e||"--"===e)return'\n        <div class="ddbc-spell-damage-effect ddbc-spell-damage-effect--dark-mode">\n          <span class="ddbc-spell-damage-effect__tags ddbc-spell-damage-effect__tags--dark-mode">Varies</span>\n        </div>\n      ';var t=e.match(/(\d+d\d+(?:\+\d+)?)\s*(\w+)?/i);if(t){var n=y(t,3),a=n[1],o=n[2],i=this.getDamageTypeIcon(o);return'\n        <div class="ddbc-spell-damage-effect ddbc-spell-damage-effect--dark-mode">\n          <span class="ddbc-spell-damage-effect__damages">\n            <button aria-haspopup="menu" class="integrated-dice__container">\n              <span class="ddbc-damage__value ddbc-damage__value--dark-mode">'.concat(a,"</span>\n              ").concat(i,"\n            </button>\n          </span>\n        </div>\n      ")}return'\n      <div class="ddbc-spell-damage-effect ddbc-spell-damage-effect--dark-mode">\n        <span class="ddbc-spell-damage-effect__tags ddbc-spell-damage-effect__tags--dark-mode">'.concat(e,"</span>\n      </div>\n    ")}},{key:"getDamageTypeIcon",value:function(e){if(!e)return"";var t={fire:"fire",cold:"cold",lightning:"lightning",thunder:"thunder",acid:"acid",poison:"poison",necrotic:"necrotic",radiant:"radiant",psychic:"psychic",force:"force",piercing:"piercing",slashing:"slashing",bludgeoning:"bludgeoning"}[e.toLowerCase()];return t?'\n        <span class="ddbc-damage__icon">\n          <span class="ddbc-damage-type-icon ddbc-damage-type-icon--'.concat(t,'" aria-label="').concat(e,' damage">\n            <span class="ddbc-tooltip ddbc-tooltip--dark-mode" data-tippy="" data-original-title="').concat(e,'">\n              \x3c!-- SVG icon would go here --\x3e\n            </span>\n          </span>\n        </span>\n      '):""}},{key:"formatComponents",value:function(e){var t=this;if(!e)return'<div class="ddbc-note-components"></div>';var n=[];if(e.duration){var a={Instantaneous:"Instant","1 minute":"D: 1m","10 minutes":"D: 10m","1 hour":"D: 1h","8 hours":"D: 8h","24 hours":"D: 24h","Until dispelled":"D: Until dispelled","Concentration, up to 1 minute":"D: 1m","Concentration, up to 10 minutes":"D: 10m","Concentration, up to 1 hour":"D: 1h"}[e.duration]||e.duration;n.push('<span class="ddbc-tooltip ddbc-note-components__component ddbc-note-components__component--tooltip ddbc-note-components__component--dark-mode ddbc-tooltip--dark-mode" data-tippy="" data-original-title="'.concat(e.duration,'">').concat(a,"</span>"))}var o=[];if(e.verbal&&o.push("V"),e.somatic&&o.push("S"),e.material&&o.push("M"),o.length>0){var i=o.map(function(e){return'<span class="ddbc-tooltip ddbc-note-components__component ddbc-note-components__component--tooltip ddbc-note-components__component--dark-mode ddbc-tooltip--dark-mode" data-tippy="" data-original-title="'.concat(t.getComponentTooltip(e),'">').concat(e,"</span>")}).join("/");n.push(i)}return'<div class="ddbc-note-components">'.concat(n.join(", "),"</div>")}},{key:"getComponentTooltip",value:function(e){return{V:"Verbal",S:"Somatic",M:"Material"}[e]||e}},{key:"addCustomStyles",value:function(){if(!document.getElementById("dndb-toolbelt-extra-spells-styles")){var e=document.createElement("style");e.id="dndb-toolbelt-extra-spells-styles",e.textContent="\n      .dndb-toolbelt-extra-spell {\n        background-color: #4a148c !important;\n        border-color: #4a148c !important;\n      }\n      \n      .dndb-toolbelt-extra-spell:hover {\n        background-color: #6a1b9a !important;\n        border-color: #6a1b9a !important;\n      }\n      \n      .dndb-toolbelt-extra-spell:active {\n        background-color: #38006b !important;\n        border-color: #38006b !important;\n      }\n\n      .dndb-toolbelt-extra-spell .ct-button__content {\n        color: white !important;\n      }\n\n      /* Styling for clickable spell names */\n      [data-spell-id] .styles_spellName__wX3ll a {\n        transition: color 0.2s ease;\n      }\n\n      [data-spell-id] .styles_spellName__wX3ll a:hover {\n        color: #4a148c !important;\n        text-decoration: underline !important;\n      }\n    ",document.head.appendChild(e)}}},{key:"removeExtraSpells",value:function(){document.querySelectorAll("[data-spell-id]").forEach(function(e){e.remove()})}}],t&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,P(a.key),a)}}function P(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}const E=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"formatModifier",value:function(e){var t=Math.floor((e-10)/2);return t>=0?"+".concat(t):"".concat(t)}},{key:"calculateScaledHP",value:function(e,t,n,a){return t?e+t*Math.max(0,n-a):e}},{key:"formatAttackBonus",value:function(e,t,n){if("string"==typeof e&&e.includes("spell"))return e;var a=parseInt(e.replace("+",""));if(t>n){var o=t-n,i=a+Math.floor(o/2);return"+".concat(i)}return e}},{key:"formatDamage",value:function(e,t,n,a){if(!a||t<=n)return e;var o=t-n,i=Math.floor(o/2);return i>0?"".concat(e," + ").concat(i).concat(a.match(/\d*d\d+/)[0]):e}},{key:"renderStatBlock",value:function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=a||o,r=e.baseStats||e.stats,l=this.calculateScaledHP((null===(t=e.baseStats)||void 0===t?void 0:t.hp)||e.hp,null===(n=e.baseStats)||void 0===n?void 0:n.hpPerLevel,i,o);return'\n      <div class="pet-stat-block">\n        <div class="pet-header">\n          <h3 class="pet-name">'.concat(e.name,'</h3>\n          <div class="pet-type">').concat(e.size," ").concat(e.type,'</div>\n        </div>\n        \n        <div class="pet-basic-stats">\n          <div class="stat-line">\n            <strong>Armor Class:</strong> ').concat(e.ac||(null==r?void 0:r.ac)||"N/A",'\n          </div>\n          <div class="stat-line">\n            <strong>Hit Points:</strong> ').concat(l).concat(a?" (scaled to level ".concat(a,")"):"",'\n          </div>\n          <div class="stat-line">\n            <strong>Speed:</strong> ').concat(e.speed||(null==r?void 0:r.speed)||"N/A","\n          </div>\n        </div>\n\n        ").concat(this.renderAbilityScores(r),"\n        ").concat(this.renderSkillsAndSenses(e),"\n        ").concat(this.renderResistancesAndImmunities(e),"\n        ").concat(this.renderAbilities(e.abilities),"\n        ").concat(this.renderActions(e.actions,i,o),"\n      </div>\n    ")}},{key:"renderAbilityScores",value:function(e){return e?'\n      <div class="ability-scores">\n        <div class="ability-score">\n          <div class="ability-name">STR</div>\n          <div class="ability-value">'.concat(e.str||10," (").concat(this.formatModifier(e.str||10),')</div>\n        </div>\n        <div class="ability-score">\n          <div class="ability-name">DEX</div>\n          <div class="ability-value">').concat(e.dex||10," (").concat(this.formatModifier(e.dex||10),')</div>\n        </div>\n        <div class="ability-score">\n          <div class="ability-name">CON</div>\n          <div class="ability-value">').concat(e.con||10," (").concat(this.formatModifier(e.con||10),')</div>\n        </div>\n        <div class="ability-score">\n          <div class="ability-name">INT</div>\n          <div class="ability-value">').concat(e.int||10," (").concat(this.formatModifier(e.int||10),')</div>\n        </div>\n        <div class="ability-score">\n          <div class="ability-name">WIS</div>\n          <div class="ability-value">').concat(e.wis||10," (").concat(this.formatModifier(e.wis||10),')</div>\n        </div>\n        <div class="ability-score">\n          <div class="ability-name">CHA</div>\n          <div class="ability-value">').concat(e.cha||10," (").concat(this.formatModifier(e.cha||10),")</div>\n        </div>\n      </div>\n    "):""}},{key:"renderSkillsAndSenses",value:function(e){var t="";if(e.skills){var n=Object.entries(e.skills).map(function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,i,r,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],a=t[1];return"".concat(n.charAt(0).toUpperCase()+n.slice(1)," +").concat(a)}).join(", ");t+='\n        <div class="stat-line">\n          <strong>Skills:</strong> '.concat(n,"\n        </div>\n      ")}return e.senses&&(t+='\n        <div class="stat-line">\n          <strong>Senses:</strong> '.concat(e.senses,"\n        </div>\n      ")),e.languages&&(t+='\n        <div class="stat-line">\n          <strong>Languages:</strong> '.concat(e.languages,"\n        </div>\n      ")),t}},{key:"renderResistancesAndImmunities",value:function(e){var t="";return e.damageResistance&&(t+='\n        <div class="stat-line">\n          <strong>Damage Resistances:</strong> '.concat(e.damageResistance,"\n        </div>\n      ")),e.damageImmunity&&(t+='\n        <div class="stat-line">\n          <strong>Damage Immunities:</strong> '.concat(e.damageImmunity,"\n        </div>\n      ")),e.conditionImmunity&&(t+='\n        <div class="stat-line">\n          <strong>Condition Immunities:</strong> '.concat(e.conditionImmunity,"\n        </div>\n      ")),t}},{key:"renderAbilities",value:function(e){return e&&0!==e.length?'\n      <div class="pet-abilities">\n        <h4>Special Abilities</h4>\n        '.concat(e.map(function(e){return'\n          <div class="ability">\n            <strong>'.concat(e.name,".</strong> ").concat(e.description,"\n          </div>\n        ")}).join(""),"\n      </div>\n    "):""}},{key:"renderActions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e&&0!==e.length?'\n      <div class="pet-actions">\n        <h4>Actions</h4>\n        '.concat(e.map(function(e){return t.renderAction(e,n,a)}).join(""),"\n      </div>\n    "):""}},{key:"renderAction",value:function(e,t,n){var a="";if("Melee Weapon Attack"===e.type||"Ranged Weapon Attack"===e.type){var o=this.formatAttackBonus(e.bonus,t,n),i=this.formatDamage(e.damage,t,n,e.scalingDamage);a="<em>".concat(e.type,":</em> ").concat(o," to hit, reach ").concat(e.reach||"5 ft.",", one target. \n                   <em>Hit:</em> ").concat(i,".")}else if("Melee Spell Attack"===e.type){var r=this.formatDamage(e.damage,t,n,e.scalingDamage);a="<em>".concat(e.type,":</em> ").concat(e.bonus," to hit, reach ").concat(e.reach||"5 ft.",", one target. \n                   <em>Hit:</em> ").concat(r,".")}else if("Area Effect"===e.type){var l=this.formatDamage(e.damage,t,n,e.scalingDamage);a="".concat(e.area,", ").concat(e.save," save. <em>Effect:</em> ").concat(l,".")}else a=e.description||"";return e.additionalEffect&&(a+=" ".concat(e.additionalEffect)),'\n      <div class="action">\n        <strong>'.concat(e.name,".</strong> ").concat(a,"\n      </div>\n    ")}},{key:"renderSpellLevelSelector",value:function(e){return!e.scalingLevels||e.scalingLevels.length<=1?"":'\n      <div class="spell-level-selector">\n        <label for="spell-level-select">Cast at Level:</label>\n        <select id="spell-level-select" class="spell-level-select">\n          '.concat(e.scalingLevels.map(function(t){return'\n            <option value="'.concat(t,'" ').concat(t===e.summonLevel?"selected":"",">\n              ").concat(t).concat(1===t?"st":2===t?"nd":3===t?"rd":"th"," Level\n            </option>\n          ")}).join(""),"\n        </select>\n      </div>\n    ")}},{key:"renderPetOptions",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||e.summonLevel;return'\n      <div class="pet-options">\n        '.concat(e.options.map(function(a,o){return'\n          <div class="pet-option" data-pet-index="'.concat(o,'">\n            <div class="pet-option-header">\n              <h4>').concat(a.name,"</h4>\n              ").concat(a.maxCount?'<span class="max-count">Max: '.concat(a.maxCount,"</span>"):"",'\n            </div>\n            <div class="pet-option-content">\n              ').concat(t.renderStatBlock(a,n,e.summonLevel),"\n            </div>\n          </div>\n        ")}).join(""),"\n      </div>\n    ")}},{key:"renderPetSummaryCard",value:function(e){return'\n      <div class="pet-summary-card">\n        <h3>'.concat(e.name,'</h3>\n        <p class="pet-description">').concat(e.description,'</p>\n        <div class="pet-summary-stats">\n          <span class="spell-level">Spell Level: ').concat(e.summonLevel,'</span>\n          <span class="option-count">').concat(e.options.length," option").concat(1!==e.options.length?"s":"","</span>\n        </div>\n      </div>\n    ")}}],null&&T(e.prototype,null),t&&T(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),L={"find-familiar":{name:"Find Familiar",description:"Familiar creatures from Find Familiar spell",summonLevel:1,options:[{name:"Owl",size:"Tiny",type:"Beast",ac:11,hp:1,speed:"5 ft., fly 60 ft.",stats:{str:3,dex:13,con:8,int:2,wis:12,cha:7},skills:{perception:3,stealth:3},senses:"Darkvision 120 ft., passive Perception 13",abilities:[{name:"Flyby",description:"The owl doesn't provoke opportunity attacks when it flies out of an enemy's reach."},{name:"Keen Hearing and Sight",description:"The owl has advantage on Wisdom (Perception) checks that rely on hearing or sight."}],actions:[{name:"Talons",type:"Melee Weapon Attack",bonus:"+3",reach:"5 ft.",damage:"1 slashing damage"}]},{name:"Cat",size:"Tiny",type:"Beast",ac:12,hp:2,speed:"40 ft., climb 30 ft.",stats:{str:3,dex:15,con:10,int:3,wis:12,cha:7},skills:{perception:3,stealth:4},senses:"Passive Perception 13",abilities:[{name:"Keen Smell",description:"The cat has advantage on Wisdom (Perception) checks that rely on smell."}],actions:[{name:"Claws",type:"Melee Weapon Attack",bonus:"+0",reach:"5 ft.",damage:"1 slashing damage"}]},{name:"Raven",size:"Tiny",type:"Beast",ac:12,hp:1,speed:"10 ft., fly 50 ft.",stats:{str:2,dex:14,con:8,int:2,wis:12,cha:6},skills:{perception:3},senses:"Passive Perception 13",abilities:[{name:"Mimicry",description:"The raven can mimic simple sounds it has heard, such as a person whispering, a baby crying, or an animal chittering."}],actions:[{name:"Beak",type:"Melee Weapon Attack",bonus:"+4",reach:"5 ft.",damage:"1 piercing damage"}]}]},"summon-draconic-spirit":{name:"Summon Draconic Spirit",description:"Draconic spirit from 5th level spell",summonLevel:5,scalingLevels:[5,6,7,8,9],options:[{name:"Draconic Spirit",size:"Large",type:"Dragon",baseStats:{ac:14,hp:50,hpPerLevel:10,speed:"30 ft., fly 60 ft., swim 30 ft.",stats:{str:19,dex:14,con:17,int:10,wis:14,cha:14},damageResistance:"Chosen damage type",conditionImmunity:"Charmed, frightened, poisoned",senses:"Blindsight 30 ft., darkvision 60 ft., passive Perception 12",languages:"Draconic, understands the languages you speak"},abilities:[{name:"Shared Resistances",description:"When you summon the dragon, choose a damage type: acid, cold, fire, lightning, or poison. The dragon has resistance to that damage type."}],actions:[{name:"Multiattack",description:"The dragon makes a number of Rend attacks equal to half the spell slot level (rounded down).",scaling:!0},{name:"Rend",type:"Melee Weapon Attack",bonus:"+7",reach:"10 ft.",damage:"1d6 + 4 + spell level piercing damage",scaling:!0},{name:"Breath Weapon (Recharge 5-6)",type:"Area Effect",save:"Dexterity",area:"30-foot cone",damage:"Spell level d6 of chosen damage type",scaling:!0}]}]},"animate-objects":{name:"Animate Objects",description:"Animated objects from 5th level spell",summonLevel:5,options:[{name:"Tiny Animated Object",size:"Tiny",ac:18,hp:20,speed:"30 ft.",stats:{str:4,dex:18,con:10},attackBonus:"+8",damage:"1d4 + 4",maxCount:10},{name:"Small Animated Object",size:"Small",ac:16,hp:25,speed:"25 ft.",stats:{str:6,dex:14,con:10},attackBonus:"+6",damage:"1d8 + 2",maxCount:5},{name:"Medium Animated Object",size:"Medium",ac:13,hp:40,speed:"20 ft.",stats:{str:10,dex:12,con:10},attackBonus:"+5",damage:"2d6 + 1",maxCount:2},{name:"Large Animated Object",size:"Large",ac:10,hp:50,speed:"15 ft.",stats:{str:14,dex:10,con:10},attackBonus:"+6",damage:"2d10 + 2",maxCount:1}]},"conjure-animals":{name:"Conjure Animals",description:"Summon fey spirits that take the form of beasts",summonLevel:3,scalingLevels:[3,5,7,9],options:[{name:"Wolf",size:"Medium",type:"Beast",ac:13,hp:11,speed:"40 ft.",stats:{str:12,dex:15,con:12,int:3,wis:12,cha:6},skills:{perception:3,stealth:4},senses:"Passive Perception 13",abilities:[{name:"Pack Tactics",description:"The wolf has advantage on attack rolls against a creature if at least one of the wolf's allies is within 5 feet of the creature and the ally isn't incapacitated."}],actions:[{name:"Bite",type:"Melee Weapon Attack",bonus:"+4",reach:"5 ft.",damage:"2d4 + 2 piercing damage",additionalEffect:"Target must succeed on a DC 11 Strength saving throw or be knocked prone"}]},{name:"Giant Wolf Spider",size:"Medium",type:"Beast",ac:13,hp:11,speed:"40 ft., climb 40 ft.",stats:{str:12,dex:16,con:13,int:3,wis:12,cha:4},skills:{perception:3,stealth:7},senses:"Blindsight 10 ft., darkvision 60 ft., passive Perception 13",abilities:[{name:"Spider Climb",description:"The spider can climb difficult surfaces, including upside down on ceilings, without needing to make an ability check."},{name:"Web Sense",description:"While in contact with a web, the spider knows the exact location of any other creature in contact with the same web."}],actions:[{name:"Bite",type:"Melee Weapon Attack",bonus:"+5",reach:"5 ft.",damage:"1d8 + 3 piercing damage",additionalEffect:"Target must make a DC 11 Constitution saving throw, taking 2d8 poison damage on a failed save, or half as much on a successful one. If the poison damage reduces the target to 0 hit points, the target is stable but poisoned for 1 hour."}]}]},"bigbys-hand":{name:"Bigby's Hand",description:"Create a Large hand of shimmering, translucent force",summonLevel:5,options:[{name:"Bigby's Hand",size:"Large",type:"Force Construct",ac:20,hp:"Equal to your hit point maximum",speed:"60 ft.",stats:{str:26,dex:10,con:"-",int:"-",wis:"-",cha:"-"},damageImmunity:"Poison, psychic",conditionImmunity:"All conditions",abilities:[{name:"Clenched Fist",description:"Melee Spell Attack: +8 to hit, 2d6 + spell ability modifier force damage"},{name:"Forceful Hand",description:"Push a creature, Strength check vs your spell attack"},{name:"Grasping Hand",description:"Grapple a creature, Strength (Athletics) check vs your spell attack"},{name:"Interposing Hand",description:"Provides half cover, disadvantage on attacks through it"}]}]},"spiritual-weapon":{name:"Spiritual Weapon",description:"Create a floating spectral weapon",summonLevel:2,scalingLevels:[2,3,4,5,6,7,8,9],options:[{name:"Spiritual Weapon",size:"Medium",type:"Force Construct",ac:"-",hp:"-",speed:"20 ft. (no opportunity attacks)",abilities:[{name:"Spectral Weapon",description:"Cannot be targeted or damaged"}],actions:[{name:"Spectral Attack",type:"Melee Spell Attack",bonus:"Spell attack modifier",reach:"5 ft.",damage:"1d8 + spell ability modifier force damage",scaling:!0,scalingDamage:"+1d8 per 2 spell levels above 2nd"}]}]}};function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function M(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,D(a.key),a)}}function D(e){var t=function(e){if("object"!=A(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==A(t)?t:t+""}const z=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=null,this.currentSpell=null,this.currentLevel=null,this.isMinimized=!1,this.dragData={isDragging:!1,startX:0,startY:0,startLeft:0,startTop:0}},t=[{key:"show",value:function(){this.modal||(this.createModal(),this.attachEventListeners(),this.loadSpellList()),this.modal.style.display="flex"}},{key:"hide",value:function(){this.modal&&(this.modal.style.display="none")}},{key:"destroy",value:function(){this.modal&&(this.modal.remove(),this.modal=null,this.currentSpell=null,this.currentLevel=null)}},{key:"createModal",value:function(){this.modal=document.createElement("div"),this.modal.className="pets-modal",this.modal.innerHTML='\n      <div class="pets-modal-content">\n        <div class="pets-modal-header">\n          <div class="pets-modal-title">\n            <h2>Pet & Summon Manager</h2>\n          </div>\n          <div class="pets-modal-controls">\n            <button class="pets-modal-btn minimize-btn" title="Minimize">\n              <span class="minimize-icon">âˆ’</span>\n            </button>\n            <button class="pets-modal-btn maximize-btn" title="Maximize/Restore">\n              <span class="maximize-icon">â¬œ</span>\n            </button>\n            <button class="pets-modal-btn close-btn" title="Close">\n              <span class="close-icon">Ã—</span>\n            </button>\n          </div>\n        </div>\n        \n        <div class="pets-modal-body">\n          <div class="pets-sidebar">\n            <h3>Available Spells</h3>\n            <div class="spell-list">\n              \x3c!-- Spell list will be populated here --\x3e\n            </div>\n          </div>\n          \n          <div class="pets-main-content">\n            <div class="pets-welcome">\n              <h3>Welcome to Pet Manager</h3>\n              <p>Select a spell from the sidebar to view available pets and summons.</p>\n              <div class="pets-welcome-features">\n                <h4>Features:</h4>\n                <ul>\n                  <li>ðŸ“‹ Complete stat blocks for all pets and summons</li>\n                  <li>ðŸ“Š Automatic scaling based on spell level</li>\n                  <li>ðŸŽ¯ Optimized for D&D Beyond integration</li>\n                  <li>ðŸ“± Draggable and resizable interface</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <div class="pets-modal-footer">\n          <div class="pets-modal-status">\n            <span id="pets-status-text">Ready</span>\n          </div>\n        </div>\n      </div>\n    ',document.body.appendChild(this.modal)}},{key:"attachEventListeners",value:function(){var e=this,t=this.modal.querySelector(".pets-modal-header"),n=this.modal.querySelector(".minimize-btn"),a=this.modal.querySelector(".maximize-btn"),o=this.modal.querySelector(".close-btn");t.addEventListener("mousedown",this.startDrag.bind(this)),document.addEventListener("mousemove",this.drag.bind(this)),document.addEventListener("mouseup",this.stopDrag.bind(this)),n.addEventListener("click",this.toggleMinimize.bind(this)),a.addEventListener("click",this.toggleMaximize.bind(this)),o.addEventListener("click",this.hide.bind(this)),[n,a,o].forEach(function(e){e.addEventListener("mousedown",function(e){return e.stopPropagation()})}),this.modal.addEventListener("click",function(t){t.target===e.modal&&e.hide()}),this.modal.querySelector(".pets-modal-content").addEventListener("click",function(e){e.stopPropagation()})}},{key:"startDrag",value:function(e){if(!this.modal.classList.contains("maximized")){this.dragData.isDragging=!0,this.dragData.startX=e.clientX,this.dragData.startY=e.clientY;var t=this.modal.getBoundingClientRect();this.dragData.startLeft=t.left,this.dragData.startTop=t.top,this.modal.style.cursor="grabbing",e.preventDefault()}}},{key:"drag",value:function(e){if(this.dragData.isDragging){var t=e.clientX-this.dragData.startX,n=e.clientY-this.dragData.startY,a=this.dragData.startLeft+t,o=this.dragData.startTop+n,i=this.modal.getBoundingClientRect(),r=window.innerWidth-i.width,l=window.innerHeight-i.height;this.modal.style.left=Math.max(0,Math.min(a,r))+"px",this.modal.style.top=Math.max(0,Math.min(o,l))+"px",this.modal.style.right="auto",this.modal.style.bottom="auto"}}},{key:"stopDrag",value:function(){this.dragData.isDragging=!1,this.modal.style.cursor="default"}},{key:"toggleMinimize",value:function(){var e=this.modal.querySelector(".pets-modal-body"),t=this.modal.querySelector(".pets-modal-footer"),n=this.modal.querySelector(".minimize-icon");this.isMinimized=!this.isMinimized,this.isMinimized?(e.style.display="none",t.style.display="none",n.textContent="+",this.modal.classList.add("minimized")):(e.style.display="flex",t.style.display="block",n.textContent="âˆ’",this.modal.classList.remove("minimized"))}},{key:"toggleMaximize",value:function(){var e=this.modal.querySelector(".maximize-icon");this.modal.classList.contains("maximized")?(this.modal.classList.remove("maximized"),e.textContent="â¬œ"):(this.modal.classList.add("maximized"),e.textContent="â¬Ÿ")}},{key:"loadSpellList",value:function(){var e=this,t=this.modal.querySelector(".spell-list");t.innerHTML=Object.entries(L).map(function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,i,r,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],a=t[1];return'\n      <div class="spell-item" data-spell="'.concat(n,'">\n        <div class="spell-item-content">\n          <h4>').concat(a.name,'</h4>\n          <p class="spell-description">').concat(a.description,'</p>\n          <div class="spell-meta">\n            <span class="spell-level">Level ').concat(a.summonLevel,'</span>\n            <span class="creature-count">').concat(a.options.length," option").concat(1!==a.options.length?"s":"","</span>\n          </div>\n        </div>\n      </div>\n    ")}).join(""),t.addEventListener("click",function(t){var n=t.target.closest(".spell-item");n&&e.selectSpell(n.dataset.spell)})}},{key:"selectSpell",value:function(e){this.modal.querySelectorAll(".spell-item").forEach(function(e){e.classList.remove("selected")});var t=this.modal.querySelector('[data-spell="'.concat(e,'"]'));t&&t.classList.add("selected"),this.currentSpell=e,this.loadSpellDetails(e),this.updateStatus("Loaded ".concat(L[e].name))}},{key:"loadSpellDetails",value:function(e){var t=this,n=L[e],a=this.modal.querySelector(".pets-main-content");a.innerHTML='\n      <div class="spell-details">\n        <div class="spell-header">\n          <h2>'.concat(n.name,'</h2>\n          <p class="spell-description">').concat(n.description,"</p>\n          ").concat(E.renderSpellLevelSelector(n),'\n        </div>\n        \n        <div class="pets-container">\n          ').concat(E.renderPetOptions(n),"\n        </div>\n      </div>\n    ");var o=a.querySelector("#spell-level-select");o&&o.addEventListener("change",function(e){t.updateSpellLevel(parseInt(e.target.value))}),a.addEventListener("click",function(e){var n=e.target.closest(".pet-option");n&&t.togglePetDetails(n)})}},{key:"updateSpellLevel",value:function(e){this.currentLevel=e;var t=L[this.currentSpell];this.modal.querySelector(".pets-container").innerHTML=E.renderPetOptions(t,e),this.updateStatus("Updated to spell level ".concat(e))}},{key:"togglePetDetails",value:function(e){var t=e.querySelector(".pet-option-content"),n=e.classList.contains("expanded");this.modal.querySelectorAll(".pet-option").forEach(function(e){e.classList.remove("expanded"),e.querySelector(".pet-option-content").style.display="none"}),n||(e.classList.add("expanded"),t.style.display="block")}},{key:"updateStatus",value:function(e){var t=this.modal.querySelector("#pets-status-text");t&&(t.textContent=e,setTimeout(function(){t.textContent===e&&(t.textContent="Ready")},3e3))}},{key:"isVisible",value:function(){return this.modal&&"none"!==this.modal.style.display}},{key:"toggleVisibility",value:function(){this.isVisible()?this.hide():this.show()}}],t&&M(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,B(a.key),a)}}function B(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}const I=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="Pets",this.description="Manage pet and summon stat blocks with scaling and UI controls",this.initialized=!1,this.modal=null,this.toolbeltButton=null},(t=[{key:"init",value:function(){this.initialized||(console.log("ðŸ¾ Pets feature initializing..."),this.injectStyles(),this.createModal(),this.addToolbeltButton(),this.initialized=!0,console.log("ðŸ¾ Pets feature initialized"))}},{key:"disable",value:function(){this.initialized&&(this.removeToolbeltButton(),this.destroyModal(),this.removeStyles(),this.initialized=!1,console.log("ðŸ¾ Pets feature disabled"))}},{key:"onTabChange",value:function(e){this.initialized&&console.log("Pets feature: Tab changed to",e)}},{key:"injectStyles",value:function(){if(!document.getElementById("pets-feature-styles")){var e=document.createElement("style");e.id="pets-feature-styles",e.textContent="\n      /* Pets Modal Styles */\n      .pets-modal {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        background: rgba(0, 0, 0, 0.6);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 10000;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      }\n\n      .pets-modal-content {\n        background: #1e1e1e;\n        border: 1px solid #444;\n        border-radius: 8px;\n        width: 90vw;\n        max-width: 1200px;\n        height: 80vh;\n        max-height: 800px;\n        display: flex;\n        flex-direction: column;\n        color: #e0e0e0;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\n        overflow: hidden;\n      }\n\n      .pets-modal.minimized .pets-modal-content {\n        height: auto;\n        max-height: none;\n      }\n\n      .pets-modal.maximized {\n        align-items: stretch;\n        justify-content: stretch;\n      }\n\n      .pets-modal.maximized .pets-modal-content {\n        width: 100vw;\n        height: 100vh;\n        max-width: none;\n        max-height: none;\n        border-radius: 0;\n      }\n\n      /* Modal Header */\n      .pets-modal-header {\n        background: #2d2d2d;\n        border-bottom: 1px solid #444;\n        padding: 12px 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        cursor: grab;\n        user-select: none;\n      }\n\n      .pets-modal-header:active {\n        cursor: grabbing;\n      }\n\n      .pets-modal-title h2 {\n        margin: 0;\n        font-size: 18px;\n        font-weight: 600;\n        color: #e0e0e0;\n      }\n\n      .pets-modal-controls {\n        display: flex;\n        gap: 8px;\n      }\n\n      .pets-modal-btn {\n        background: #444;\n        border: 1px solid #666;\n        border-radius: 4px;\n        width: 28px;\n        height: 28px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        color: #e0e0e0;\n        font-size: 14px;\n        transition: all 0.2s ease;\n      }\n\n      .pets-modal-btn:hover {\n        background: #555;\n        border-color: #777;\n      }\n\n      .pets-modal-btn:active {\n        background: #333;\n        transform: scale(0.95);\n      }\n\n      .close-btn:hover {\n        background: #cc4125;\n        border-color: #cc4125;\n      }\n\n      /* Modal Body */\n      .pets-modal-body {\n        flex: 1;\n        display: flex;\n        overflow: hidden;\n      }\n\n      .pets-sidebar {\n        width: 300px;\n        background: #2a2a2a;\n        border-right: 1px solid #444;\n        padding: 16px;\n        overflow-y: auto;\n      }\n\n      .pets-sidebar h3 {\n        margin: 0 0 16px 0;\n        font-size: 16px;\n        color: #e0e0e0;\n        border-bottom: 1px solid #444;\n        padding-bottom: 8px;\n      }\n\n      .spell-list {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n\n      .spell-item {\n        background: #1e1e1e;\n        border: 1px solid #444;\n        border-radius: 6px;\n        padding: 12px;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .spell-item:hover {\n        background: #333;\n        border-color: #666;\n      }\n\n      .spell-item.selected {\n        background: #0d7377;\n        border-color: #14a085;\n      }\n\n      .spell-item h4 {\n        margin: 0 0 6px 0;\n        font-size: 14px;\n        font-weight: 600;\n        color: #e0e0e0;\n      }\n\n      .spell-description {\n        margin: 0 0 8px 0;\n        font-size: 12px;\n        color: #b0b0b0;\n        line-height: 1.4;\n      }\n\n      .spell-meta {\n        display: flex;\n        justify-content: space-between;\n        font-size: 11px;\n        color: #888;\n      }\n\n      .spell-level {\n        background: #444;\n        padding: 2px 6px;\n        border-radius: 3px;\n      }\n\n      /* Main Content */\n      .pets-main-content {\n        flex: 1;\n        padding: 16px;\n        overflow-y: auto;\n        background: #1a1a1a;\n      }\n\n      .pets-welcome {\n        text-align: center;\n        padding: 40px 20px;\n        color: #b0b0b0;\n      }\n\n      .pets-welcome h3 {\n        margin: 0 0 16px 0;\n        color: #e0e0e0;\n      }\n\n      /* Pet Options */\n      .pet-options {\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n      }\n\n      .pet-option {\n        background: #2a2a2a;\n        border: 1px solid #444;\n        border-radius: 6px;\n        overflow: hidden;\n        transition: all 0.2s ease;\n      }\n\n      .pet-option:hover {\n        border-color: #666;\n      }\n\n      .pet-option.expanded {\n        border-color: #0d7377;\n      }\n\n      .pet-option-header {\n        padding: 12px 16px;\n        background: #333;\n        cursor: pointer;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        user-select: none;\n      }\n\n      .pet-option-header h4 {\n        margin: 0;\n        color: #e0e0e0;\n        font-size: 16px;\n      }\n\n      .pet-option-content {\n        display: none;\n        padding: 16px;\n        background: #1e1e1e;\n      }\n\n      /* Pet Stat Blocks */\n      .pet-stat-block {\n        font-family: 'Georgia', serif;\n        line-height: 1.5;\n      }\n\n      .pet-header {\n        margin-bottom: 12px;\n        border-bottom: 2px solid #8B0000;\n        padding-bottom: 8px;\n      }\n\n      .pet-name {\n        margin: 0 0 4px 0;\n        font-size: 20px;\n        font-weight: bold;\n        color: #e0e0e0;\n      }\n\n      .pet-type {\n        font-style: italic;\n        color: #b0b0b0;\n        font-size: 14px;\n      }\n\n      .stat-line {\n        margin-bottom: 4px;\n        font-size: 14px;\n      }\n\n      .stat-line strong {\n        color: #e0e0e0;\n      }\n\n      /* Ability Scores */\n      .ability-scores {\n        display: grid;\n        grid-template-columns: repeat(6, 1fr);\n        gap: 8px;\n        margin: 12px 0;\n        padding: 12px;\n        background: #333;\n        border-radius: 4px;\n      }\n\n      .ability-score {\n        text-align: center;\n      }\n\n      .ability-name {\n        font-size: 12px;\n        font-weight: bold;\n        color: #b0b0b0;\n        margin-bottom: 4px;\n      }\n\n      .ability-value {\n        font-size: 14px;\n        color: #e0e0e0;\n      }\n\n      /* Pet Abilities and Actions */\n      .pet-abilities,\n      .pet-actions {\n        margin-top: 12px;\n      }\n\n      .pet-abilities h4,\n      .pet-actions h4 {\n        margin: 0 0 8px 0;\n        color: #e0e0e0;\n        font-size: 16px;\n        border-bottom: 1px solid #8B0000;\n        padding-bottom: 4px;\n      }\n\n      .ability,\n      .action {\n        margin-bottom: 8px;\n        font-size: 14px;\n        color: #d0d0d0;\n      }\n\n      .ability strong,\n      .action strong {\n        color: #e0e0e0;\n      }\n\n      /* Modal Footer */\n      .pets-modal-footer {\n        background: #2d2d2d;\n        border-top: 1px solid #444;\n        padding: 12px 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n\n      .pets-modal-status {\n        font-size: 12px;\n        color: #b0b0b0;\n      }\n\n      /* Toolbelt Floating Button */\n      .pets-floating-btn {\n        font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', sans-serif !important;\n      }\n      \n      .pets-floating-btn:hover {\n        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4) !important;\n      }\n      \n      .pets-floating-btn:active {\n        transform: scale(0.95) !important;\n      }\n\n      /* Responsive Design */\n      @media (max-width: 768px) {\n        .pets-modal-content {\n          width: 95vw;\n          height: 90vh;\n        }\n        \n        .pets-modal-body {\n          flex-direction: column;\n        }\n        \n        .pets-sidebar {\n          width: 100%;\n          max-height: 200px;\n          border-right: none;\n          border-bottom: 1px solid #444;\n        }\n        \n        .ability-scores {\n          grid-template-columns: repeat(3, 1fr);\n        }\n      }\n    ",document.head.appendChild(e),console.log("ðŸ¾ Pets feature styles injected")}}},{key:"removeStyles",value:function(){var e=document.getElementById("pets-feature-styles");e&&e.remove()}},{key:"createModal",value:function(){this.modal||(this.modal=new z)}},{key:"destroyModal",value:function(){this.modal&&(this.modal.destroy(),this.modal=null)}},{key:"addToolbeltButton",value:function(){this.toolbeltButton||this.createFloatingButton()}},{key:"createFloatingButton",value:function(){var e=this;this.toolbeltButton=document.createElement("button"),this.toolbeltButton.className="pets-floating-btn",this.toolbeltButton.innerHTML="ðŸ¾",this.toolbeltButton.title="Open Pet & Summon Manager",Object.assign(this.toolbeltButton.style,{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"#2a2a2a",border:"2px solid #444",color:"#e0e0e0",fontSize:"24px",cursor:"pointer",zIndex:"9999",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center"}),this.toolbeltButton.addEventListener("mouseenter",function(){e.toolbeltButton.style.backgroundColor="#333",e.toolbeltButton.style.borderColor="#666",e.toolbeltButton.style.transform="scale(1.1)"}),this.toolbeltButton.addEventListener("mouseleave",function(){e.toolbeltButton.style.backgroundColor="#2a2a2a",e.toolbeltButton.style.borderColor="#444",e.toolbeltButton.style.transform="scale(1)"}),this.toolbeltButton.addEventListener("click",function(){e.modal&&e.modal.toggleVisibility()}),document.body.appendChild(this.toolbeltButton)}},{key:"removeToolbeltButton",value:function(){this.toolbeltButton&&(this.toolbeltButton.remove(),this.toolbeltButton=null)}},{key:"showModal",value:function(){this.modal&&this.modal.show()}},{key:"hideModal",value:function(){this.modal&&this.modal.hide()}},{key:"toggleModal",value:function(){this.modal&&this.modal.toggleVisibility()}},{key:"isModalVisible",value:function(){return!!this.modal&&this.modal.isVisible()}},{key:"getPetData",value:function(e){try{return null}catch(e){return console.error("Failed to load pet data:",e),null}}},{key:"getSupportedSpells",value:function(){return["find-familiar","summon-draconic-spirit","animate-objects","conjure-animals","bigbys-hand","spiritual-weapon"]}}])&&O(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function U(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,R(a.key),a)}}function R(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}const N=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tabDetector=t,this.features={spellEnhancements:new h,addExtraSpells:new x,pets:new I},this.enabledFeatures=new Set,this.storageKey="dndbeyond-toolbelt-enabled-features",this.loadEnabledFeatures(),this.tabDetector&&this.tabDetector.addTabChangeListener(function(e,t){n.enabledFeatures.forEach(function(a){var o=n.features[a];o&&o.onTabChange&&o.onTabChange(e,t)})})},t=[{key:"enableFeature",value:function(e){var t=this.features[e];if(t&&!this.enabledFeatures.has(e))try{t.initialized||t.init(),this.enabledFeatures.add(e),this.saveEnabledFeatures()}catch(t){console.error("âŒ Failed to enable feature ".concat(e,":"),t)}}},{key:"disableFeature",value:function(e){var t=this.features[e];if(t&&this.enabledFeatures.has(e))try{"function"==typeof t.disable&&t.disable(),this.enabledFeatures.delete(e),this.saveEnabledFeatures()}catch(t){console.error("âŒ Failed to disable feature ".concat(e,":"),t)}}},{key:"isFeatureEnabled",value:function(e){return this.enabledFeatures.has(e)}},{key:"getAllEnabledFeatures",value:function(){return Array.from(this.enabledFeatures)}},{key:"getAllFeatures",value:function(){return Object.keys(this.features)}},{key:"getFeatureInfo",value:function(e){var t=this.features[e];return t?{name:t.name,description:t.description,enabled:this.isFeatureEnabled(e),initialized:t.initialized}:null}},{key:"getAllFeaturesInfo",value:function(){var e=this;return Object.keys(this.features).map(function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){U(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({key:t},e.getFeatureInfo(t))})}},{key:"disableAllFeatures",value:function(){var e=this;this.enabledFeatures.forEach(function(t){e.disableFeature(t)})}},{key:"saveEnabledFeatures",value:function(){if(!this.isLoading)try{var e=Array.from(this.enabledFeatures);localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.error("âŒ Failed to save enabled features to local storage:",e)}}},{key:"loadEnabledFeatures",value:function(){var e=this;try{var t=localStorage.getItem(this.storageKey);if(t){var n=JSON.parse(t);this.enabledFeatures.clear(),n.length>0&&(this.isLoading=!0,n.forEach(function(t){e.features[t]&&e.enableFeature(t)}),this.isLoading=!1)}else this.enabledFeatures.clear(),this.saveEnabledFeatures()}catch(e){console.error("âŒ Failed to load enabled features from local storage:",e),localStorage.removeItem(this.storageKey),this.enabledFeatures.clear()}}},{key:"clearStoredPreferences",value:function(){try{localStorage.removeItem(this.storageKey)}catch(e){console.error("âŒ Failed to clear stored preferences:",e)}}}],t&&W(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function X(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,K(a.key),a)}}function K(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}const G=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTab=null,this.observers=[],this.tabChangeListeners=[],this.isWatching=!1},(t=[{key:"init",value:function(){this.isWatching||(console.log("ðŸ‘ï¸ Tab detector initialized"),this.startWatching(),this.isWatching=!0)}},{key:"startWatching",value:function(){var e=this;this.detectCurrentTab();var t=new MutationObserver(function(){e.detectCurrentTab()}),n=document.querySelector('menu[class*="styles_tabs_"]');n&&t.observe(n,{attributes:!0,subtree:!0,attributeFilter:["aria-checked"]});var a=new MutationObserver(function(){var n=document.querySelector('menu[class*="styles_tabs_"]');n&&!e.observers.includes(n)&&t.observe(n,{attributes:!0,subtree:!0,attributeFilter:["aria-checked"]})});a.observe(document.body,{childList:!0,subtree:!0}),this.observers.push(t,a)}},{key:"detectCurrentTab",value:function(){var e=this,t=document.querySelector('menu[class*="styles_tabs_"]');if(t){var n=t.querySelectorAll("li button"),a=null;n.forEach(function(t){var n="true"===t.getAttribute("aria-checked"),o=t.textContent.trim();n&&(a=o),(e.currentTab!==o||n)&&e.notifyTabChange(o,n)}),this.currentTab!==a&&(console.log("ðŸ”„ Tab changed: ".concat(this.currentTab," â†’ ").concat(a)),this.currentTab=a)}else null!==this.currentTab&&(this.currentTab=null,this.notifyTabChange(null,!1))}},{key:"addTabChangeListener",value:function(e){this.tabChangeListeners.push(e)}},{key:"removeTabChangeListener",value:function(e){var t=this.tabChangeListeners.indexOf(e);t>-1&&this.tabChangeListeners.splice(t,1)}},{key:"notifyTabChange",value:function(e,t){this.tabChangeListeners.forEach(function(n){try{n(e,t)}catch(e){console.error("Error in tab change listener:",e)}})}},{key:"getCurrentTab",value:function(){return this.currentTab}},{key:"destroy",value:function(){this.observers.forEach(function(e){return e.disconnect()}),this.observers=[],this.tabChangeListeners=[],this.isWatching=!1,console.log("ðŸ‘ï¸ Tab detector destroyed")}}])&&X(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function $(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,J(a.key),a)}}function J(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}const Z=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.isControlPanelOpen=!1,this.tabDetector=new G,this.featureManager=new N(this.tabDetector),this.globalToggleEnabled=!0,this.button=null,this.controlPanel=null,this.toggleControlPanel=this.toggleControlPanel.bind(this),this.toggleFeature=this.toggleFeature.bind(this),this.closeControlPanel=this.closeControlPanel.bind(this)},(t=[{key:"mount",value:function(){this.button=new r(this.toggleControlPanel);var e=this.button.render();this.container.appendChild(e),this.tabDetector.init()}},{key:"toggleControlPanel",value:function(){this.isControlPanelOpen=!this.isControlPanelOpen,this.isControlPanelOpen?this.showControlPanel():this.hideControlPanel()}},{key:"showControlPanel",value:function(){this.controlPanel||(this.controlPanel=new u(this.getFeaturesForUI(),this.toggleFeature,this.closeControlPanel)),document.body.appendChild(this.controlPanel.render())}},{key:"hideControlPanel",value:function(){this.controlPanel&&this.controlPanel.element&&document.body.removeChild(this.controlPanel.element)}},{key:"closeControlPanel",value:function(){this.isControlPanelOpen=!1,this.hideControlPanel()}},{key:"getFeaturesForUI",value:function(){var e=this.featureManager.getAllFeaturesInfo(),t={};return e.forEach(function(e){t[e.key]={label:e.name,description:e.description,enabled:e.enabled}}),t.globalToggle={label:"Enable All Features",description:"Master toggle for all toolbelt features",enabled:this.globalToggleEnabled},t}},{key:"toggleFeature",value:function(e){var t=this;if("globalToggle"===e)this.globalToggleEnabled=!this.globalToggleEnabled,this.featureManager.getAllFeatures().forEach(function(e){t.globalToggleEnabled?t.featureManager.enableFeature(e):t.featureManager.disableFeature(e)});else{this.featureManager.isFeatureEnabled(e)?this.featureManager.disableFeature(e):this.featureManager.enableFeature(e);var n=this.featureManager.getAllFeatures().every(function(e){return t.featureManager.isFeatureEnabled(e)});this.globalToggleEnabled=n}this.controlPanel&&this.controlPanel.updateFeatures(this.getFeaturesForUI())}}])&&$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var Q=n(72),ee=n.n(Q),te=n(825),ne=n.n(te),ae=n(659),oe=n.n(ae),ie=n(56),re=n.n(ie),le=n(540),se=n.n(le),ce=n(113),de=n.n(ce),ue=n(365),pe={};function me(){var e=document.querySelector(".ct-character-header-desktop");if(!e)return console.log("D&D Beyond character header not found, retrying...!"),void setTimeout(me,1e3);console.log("D&D Beyond Toolbelt initializing.");var t=e.querySelector(".ct-character-header-desktop__group--share");if(!t)return console.log("Share button group not found, retrying..."),void setTimeout(me,1e3);if(document.getElementById("dndbeyond-toolbelt-root"))console.log("D&D Beyond Toolbelt already initialized...!");else{var n=document.createElement("div");n.id="dndbeyond-toolbelt-root",n.className="ct-character-header-desktop__group ct-character-header-desktop__group--toolbelt",t.parentNode.insertBefore(n,t),new Z(n).mount(),console.log("D&D Beyond Toolbelt initialized successfully!")}}pe.styleTagTransform=de(),pe.setAttributes=re(),pe.insert=oe().bind(null,"head"),pe.domAPI=ne(),pe.insertStyleElement=se(),ee()(ue.A,pe),ue.A&&ue.A.locals&&ue.A.locals,(window.location.hostname.includes("dndbeyond.com")||window.location.hostname.includes("localhost"))&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",me):me()),window.DNDBeyondToolbelt={init:me},DNDBeyondToolbelt={}})();